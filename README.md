# MoneyForward 家計分析ダッシュボード

MoneyForwardから出力したCSVファイルを分析するための簡単なWebアプリです。プログラミングの知識がなくても、家計データを見やすいグラフで分析できます。

## このアプリでできること

- **複数月のデータを一度に分析**: MoneyForwardから月別にダウンロードしたCSVファイルを自動的にまとめます
- **期間を選んで分析**: 特定の月だけ、または全期間での収支を確認できます
- **カテゴリ別の内訳表示**: 食費、光熱費などのカテゴリ別に支出・収入を分析
- **見やすいグラフ表示**: 
  - 円グラフで支出の割合を表示
  - 棒グラフで詳細な内訳を表示
- **詳細データの確認**: 気になるカテゴリの明細を一覧表示

## 必要なもの

- **インターネット接続**: 必要なプログラムを自動ダウンロードするため
- **Windows、Mac、またはLinux**: 最新のOSであれば動作します

## 簡単セットアップ（3ステップ）

### 1. uvをインストール

uvは、PythonとStreamlitを自動でインストール・管理してくれる便利なツールです。

**Windows（PowerShell）:**
```powershell
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

**Mac/Linux:**
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

### 2. このプログラムをダウンロード

以下のいずれかの方法でプログラムをダウンロードしてください：

**方法A: Zipファイルでダウンロード（推奨）**
1. このページの緑色の「Code」ボタンをクリック
2. 「Download ZIP」を選択
3. ダウンロードしたZipファイルを解凍
4. 解凍したフォルダを開く

**方法B: Gitを使う場合**
```bash
git clone https://github.com/clshinji/mf-data-viewer.git
cd mf-data-viewer
```

### 3. 完了！

これだけでセットアップ完了です。uvが必要なPythonやライブラリを自動的に管理します。

## MoneyForwardからのデータ準備

### 1. MoneyForwardからCSVファイルをダウンロード

1. MoneyForwardにログイン
2. 「家計」→「収支」→「収支詳細」ページに移動
3. 期間を設定（例：2024年1月1日〜2024年1月31日）
4. 「CSVダウンロード」ボタンをクリック
5. ファイル名は自動的に「収入・支出詳細_YYYY-MM-DD_YYYY-MM-DD.csv」になります

### 2. CSVファイルを配置

1. ダウンロードしたプログラムのフォルダを開く
2. `csv` フォルダを開く
3. MoneyForwardからダウンロードしたCSVファイルをここにコピー

**複数月のデータがある場合**: 各月のCSVファイルをすべて `csv` フォルダに入れてください。アプリが自動的にまとめて分析します。

## アプリの使い方

### 1. アプリを起動

ターミナル（WindowsではPowerShell）でプログラムのフォルダに移動し、以下のコマンドを実行：

```bash
uv run streamlit run analysis.py
```

**注意**: 初回実行時は、uvが自動的にPythonと必要なライブラリをダウンロード・インストールします。少し時間がかかりますが、2回目以降は高速で起動します。

### 2. ブラウザでアプリを開く

コマンドを実行すると、自動的にブラウザが開きます。開かない場合は、ターミナルに表示されるURL（通常は `http://localhost:8501`）をブラウザで開いてください。

### 3. 初回設定

1. アプリが開いたら、左側のサイドバーにある「`mf_all_data.csv` を生成・更新」ボタンをクリック
2. CSVファイルが統合され、分析準備が完了します

### 4. データを分析

- **期間選択**: サイドバーで分析したい期間を選択
- **収入・支出の切り替え**: 「支出」または「収入」を選択
- **カテゴリ選択**: 円グラフに表示したいカテゴリを選択
- **詳細分析**: 特定のカテゴリを選んで詳細を確認

## よくある質問とトラブル解決

### Q: 「uvコマンドが見つかりません」というエラーが出る
A: uvがインストールされていません。セットアップの手順1を実行してください。インストール後、ターミナルを再起動してください。

### Q: 「モジュールが見つかりません」というエラーが出る
A: uvが自動的に必要なプログラムをインストールします。以下を実行してください：
```bash
uv run streamlit run analysis.py
```

### Q: CSVファイルが読み込めない
A: 以下を確認してください：
- CSVファイルが `csv` フォルダに入っているか
- ファイル名が「収入・支出詳細_YYYY-MM-DD_YYYY-MM-DD.csv」の形式になっているか
- MoneyForwardから正しくダウンロードされたファイルか

### Q: データが表示されない
A: 以下を試してください：
1. サイドバーの「`mf_all_data.csv` を生成・更新」ボタンをクリック
2. ブラウザを更新（F5キー）
3. アプリを再起動

### Q: アプリが起動しない
A: 以下を確認してください：
- uvが正しくインストールされているか（`uv --version` で確認）
- ターミナルでプログラムのフォルダにいるか
- インターネット接続があるか（初回実行時に必要）

### Q: 新しいCSVファイルを追加したい
A: 新しいCSVファイルを `csv` フォルダに追加した後、サイドバーの「`mf_all_data.csv` を生成・更新」ボタンをクリックしてください。

## 注意事項

- **個人情報の取り扱い**: CSVファイルには個人の金融情報が含まれています。他人と共有しないよう注意してください
- **ファイル形式**: MoneyForwardからダウンロードしたCSVファイルをそのまま使用してください（編集しないでください）
- **バックアップ**: 重要なデータは定期的にバックアップを取ることをお勧めします

## uvの利点

- **簡単**: Pythonのインストールや管理が不要
- **高速**: 必要なライブラリを効率的にダウンロード・管理
- **安全**: プロジェクトごとに独立した環境を自動作成
- **自動**: 依存関係を自動解決

## サポート

問題が解決しない場合は、以下の情報を含めてお問い合わせください：
- 使用しているOS（Windows、Mac、Linux）
- uvのバージョン（`uv --version` の結果）
- エラーメッセージの内容
- 実行したコマンド

---

このアプリを使って、家計の見える化と改善にお役立てください！